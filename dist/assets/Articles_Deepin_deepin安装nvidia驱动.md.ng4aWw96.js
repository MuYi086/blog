import{_ as s,o as i,c as a,a7 as n}from"./chunks/framework.CgLK9O2D.js";const e="/assets/step_1.D5LapjeH.png",l="/assets/step_2.CjbcSLCE.png",p="/assets/step_3.B0dn7xA_.png",t="/assets/step_4.D652-TjC.png",v=JSON.parse('{"title":"deepin安装nvidia驱动","description":"","frontmatter":{"tags":["Deepin"]},"headers":[],"relativePath":"Articles/Deepin/deepin安装nvidia驱动.md","filePath":"Articles/Deepin/deepin安装nvidia驱动.md","lastUpdated":1719417334000}'),h={name:"Articles/Deepin/deepin安装nvidia驱动.md"},k=n(`<h1 id="deepin安装nvidia驱动" tabindex="-1">deepin安装nvidia驱动 <a class="header-anchor" href="#deepin安装nvidia驱动" aria-label="Permalink to &quot;deepin安装nvidia驱动&quot;">​</a></h1><h2 id="下载准确驱动" tabindex="-1">下载准确驱动 <a class="header-anchor" href="#下载准确驱动" aria-label="Permalink to &quot;下载准确驱动&quot;">​</a></h2><ol><li>确定电脑显卡型号</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看电脑显卡型号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lshw</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -numeric</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> display</span></span></code></pre></div><p><img src="`+e+'" alt="查看电脑显卡型号" title="查看电脑显卡型号"></p><ol start="2"><li>进入<code>NVIDIA</code>官网 <a href="https://www.nvidia.cn/Download/index.aspx?lang=cn" target="_blank" rel="noreferrer">下载驱动</a><img src="'+l+'" alt="搜索驱动" title="搜索驱动"></li></ol><p><img src="'+p+'" alt="下载驱动" title="下载驱动"></p><h2 id="禁用-nouveau-驱动" tabindex="-1">禁用 <code>nouveau</code> 驱动 <a class="header-anchor" href="#禁用-nouveau-驱动" aria-label="Permalink to &quot;禁用 `nouveau` 驱动&quot;">​</a></h2><p>1.安装深度的<code>显卡驱动管理器</code>,切换到因特尔默认驱动，然后重启</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deepin-graphics-driver-manager</span></span></code></pre></div><p><img src="'+t+`" alt="显卡驱动管理" title="显卡驱动管理"></p><ol start="2"><li>卸载<code>NVIDIA</code>开源驱动和闭源驱动</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> autoremove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nvidia-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span></code></pre></div><ol start="3"><li>禁止<code>nouveau</code> 驱动 <code>nouveau</code> 是通过逆向 <code>Nvidia</code> 的 <code>Linux</code> 驱动创造的一个开源第三方 <code>Nvidia</code> 显卡驱动程序，因此其效果差，性能低。在手动安装 <code>NVIDIA</code> 闭源驱动时需要禁用 <code>nouveau</code> 驱动。</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 许多帖子的说法是blacklist.conf，但我deepin是最新20.6，找到的是blacklist-bcm43.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># deepin 20.6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gedit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/modprobe.d/blacklist-bcm43.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># deepin 23</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gedit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/modprobe.d/blacklist.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在打开的文件中添加一下，并保存关闭</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blacklist</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nouveau</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blacklist</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lbm-nouveau</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">options</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nouveau</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> modeset=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nouveau</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> off</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lbm-nouveau</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> off</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 终端执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-initramfs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reboot</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看nouveau有没有运行,没输出代表禁用生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsmod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nouveau</span></span></code></pre></div><h2 id="安装-nvidia-驱动" tabindex="-1">安装 <code>nvidia</code> 驱动 <a class="header-anchor" href="#安装-nvidia-驱动" aria-label="Permalink to &quot;安装 \`nvidia\` 驱动&quot;">​</a></h2><ol><li>关闭图形界面 安装 <code>NVIDIA</code> 闭源驱动,需要停止当前的图形界面</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用CTRL+ALT+F2进入超级终端,登录账号</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭图形界面</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lightdm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span></span></code></pre></div><ol start="2"><li>安装 <code>nvidia</code> 驱动</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 增加可执行权限(替换成你下载的文件)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NVIDIA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">***</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.run</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -no-opengl-files : 只安装驱动文件，不安装OpenGL文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># -no-nouveau-check ：安装驱动时不检查Nouveau</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NVDIA</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">***</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -no-opengl-files</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -no-nouveau-check</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第一步和第二步都选yes即可</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装完毕后重启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reboot</span></span></code></pre></div><h2 id="检查驱动是否成功安装" tabindex="-1">检查驱动是否成功安装 <a class="header-anchor" href="#检查驱动是否成功安装" aria-label="Permalink to &quot;检查驱动是否成功安装&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用nvidia-setting命令启动驱动管理程序</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvidia-settings</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用nvidia-smi命令打印系统安装的nvidia驱动信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvidia-smi</span></span></code></pre></div><h2 id="其他命令" tabindex="-1">其他命令 <a class="header-anchor" href="#其他命令" aria-label="Permalink to &quot;其他命令&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看集成显卡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lspci</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VGA</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看NVIDIA显卡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lspci</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NVIDIA</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看nouveau是否运行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsmod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nouveau</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 集显和独显切换</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装dde-dock-switch_graphics_card管理</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># https://gitee.com/deepin-opensource/switch-graphics-card/releases</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下载xx.deb安装后，安装默认位置为 /opt/apps/dde-dock-graphics-plugin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># cd /opt/apps/dde-dock-graphics-plugin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># sudo bash ./files/bin/NVIDIA.sh</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启,NVIDIA驱动运行正常,且多屏扩展也ok了</span></span></code></pre></div><h2 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-label="Permalink to &quot;注意&quot;">​</a></h2><p>因为是第三方插件,部分机型重启后有可能导致 <code>dde</code> 崩溃，任务栏进入安全模式。可以下载星火商店，找到<code>dde-dock</code> ，卸载后重启即可</p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ol><li><a href="https://www.nvidia.cn/geforce/drivers/" target="_blank" rel="noreferrer">nvida 驱动下载</a></li><li><a href="https://bbs.deepin.org/post/213544" target="_blank" rel="noreferrer">Deepin20.1安装NVIDIA最新显卡驱动</a></li><li><a href="https://www.likecs.com/show-187504.html" target="_blank" rel="noreferrer">Linux(Deepin)如何安装NVIDIA显卡驱动（deepin-Linux）</a></li></ol><div style="display:none;" data-pagefind-meta="base64:JTdCJTIydGFncyUyMiUzQSU1QiUyMkRlZXBpbiUyMiU1RCUyQyUyMmRhdGUlMjIlM0ExNzE5NDE3MzM0MDAwJTdE"></div>`,29),d=[k];function r(o,c,g,F,y,u){return i(),a("div",null,d)}const D=s(h,[["render",r]]);export{v as __pageData,D as default};
